<!-- This is a sample configuration file from Alfresco Community 4.2.b -->
<alfresco-config>

   <!-- @TODO - still not working properly, needs more investigaction -->
   <!-- <config evaluator="string-compare" condition="CSRFPolicy" replace="true">
      <properties>
         <token>Alfresco-CSRFToken</token>
         <referer><%= node['alfresco']['properties']['share.protocol'] %>://<%= node['alfresco']['properties']['share.host'] %>:<%= node['alfresco']['properties']['share.port'] %>/.*</referer>
         <origin><%= node['alfresco']['properties']['share.protocol'] %>?://<%= node['alfresco']['properties']['share.host'] %>:<%= node['alfresco']['properties']['share.port'] %></origin>
      </properties>
   </config> -->

  <!-- Disables CSRF policy filter -->
  <config evaluator="string-compare" condition="CSRFPolicy" replace="true">
     <filter>
        <rule>
           <request>
              <method>POST|PUT|DELETE</method>
              <session>
                 <attribute name="_alf_USER_ID">.*</attribute>
              </session>
           </request>
           <action name="assertReferer">
              <param name="always">false</param>
           </action>
           <action name="assertOrigin">
              <param name="always">false</param>
           </action>
        </rule>
     </filter>
  </config>

	<!-- example port config used to access remote Alfresco server (default is 8080) -->
   <config evaluator="string-compare" condition="Remote">
      <remote>
         <endpoint>
            <id>alfresco-noauth</id>
            <name>Alfresco - unauthenticated access</name>
            <description>Access to Alfresco Repository WebScripts that do not require authentication</description>
            <connector-id>alfresco</connector-id>
            <endpoint-url><%= node['alfresco']['properties']['alfresco.protocol'] %>://<%= node['alfresco']['properties']['alfresco.host'] %>:<%= node['alfresco']['properties']['alfresco.port'] %><%= node['alfresco']['properties']['alfresco.context'] %>/s</endpoint-url>
            <identity>none</identity>
         </endpoint>

         <endpoint>
            <id>alfresco</id>
            <name>Alfresco - user access</name>
            <description>Access to Alfresco Repository WebScripts that require user authentication</description>
            <connector-id>alfresco</connector-id>
            <endpoint-url><%= node['alfresco']['properties']['alfresco.protocol'] %>://<%= node['alfresco']['properties']['alfresco.host'] %>:<%= node['alfresco']['properties']['alfresco.port'] %><%= node['alfresco']['properties']['alfresco.context'] %>/s</endpoint-url>
            <identity>user</identity>
         </endpoint>

         <endpoint>
            <id>alfresco-feed</id>
            <name>Alfresco Feed</name>
            <description>Alfresco Feed - supports basic HTTP authentication via the EndPointProxyServlet</description>
            <connector-id><%= node['alfresco']['properties']['alfresco.protocol'] %></connector-id>
            <endpoint-url><%= node['alfresco']['properties']['alfresco.protocol'] %>://<%= node['alfresco']['properties']['alfresco.host'] %>:<%= node['alfresco']['properties']['alfresco.port'] %><%= node['alfresco']['properties']['alfresco.context'] %>/s</endpoint-url>
            <basic-auth>true</basic-auth>
            <identity>user</identity>
         </endpoint>

         <endpoint>
            <id>activiti-admin</id>
            <name>Activiti Admin UI - user access</name>
            <description>Access to Activiti Admin UI, that requires user authentication</description>
            <connector-id>activiti-admin-connector</connector-id>
            <endpoint-url><%= node['alfresco']['properties']['alfresco.protocol'] %>://<%= node['alfresco']['properties']['alfresco.host'] %>:<%= node['alfresco']['properties']['alfresco.port'] %><%= node['alfresco']['properties']['alfresco.context'] %>/activiti-admin</endpoint-url>
            <identity>user</identity>
         </endpoint>
      </remote>
   </config>
</alfresco-config>
